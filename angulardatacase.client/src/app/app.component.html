<h1 id="tableLabel">Analytics Table</h1>

<p>This component demonstrates fetching data from the server.</p>

<p *ngIf="!dataSets"><em>Loading... Please refresh once the ASP.NET backend has started. See <a href="https://aka.ms/jspsintegrationangular">https://aka.ms/jspsintegrationangular</a> for more details.</em></p>

<!-- DATA SET ------------------------------------------------>
<mat-form-field appearance="fill">
  <mat-label>Choose Dataset</mat-label>
  <mat-select [(ngModel)]="selectedDataSetId" name="dataset" (selectionChange)="updateResults()">
    <mat-option *ngFor="let ds of dataSets" [value]="ds.id">
      {{ ds.displayName }}
    </mat-option>
  </mat-select>
</mat-form-field>

<!-- GROUPING ----------------------------------------------->
<mat-form-field appearance="fill">
  <mat-label>Choose Grouping</mat-label>
  <mat-select [(ngModel)]="selectedGrouping" name="grouping" (selectionChange)="updateResults()">
    <mat-option *ngFor="let g of groupings" [value]="g.id">
      {{ g.displayName }}
    </mat-option>
  </mat-select>
</mat-form-field>

<!-- ANALYTICS  (pick ONE implementation; list shown here) -->
<h3>Analytics</h3>
<mat-selection-list [(ngModel)]="selectedAnalytics" (selectionChange)="updateResults()">
  <mat-list-option *ngFor="let a of analytics" [value]="a.id">
    {{ a.displayName }}
  </mat-list-option>
</mat-selection-list>


Node Names for grouping=SECURITY:
<table *ngIf="groupingNodes">
  <thead>
    <tr>
      <th>ID</th>
      <th>DisplayName</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let groupingNode of groupingNodes">
      <td>{{ groupingNode.id }}</td>
      <td>{{ groupingNode.displayName }}</td>
    </tr>
  </tbody>
</table>

Calculation results for Analytic=A1, DataSet=0, grouping=SECURITY:
<table *ngIf="calculatedAnalytics">
  <thead>
    <tr>
      <th>ID</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let calculatedAnalytic of calculatedAnalytics">
      <td>{{ calculatedAnalytic.id }}</td>
      <td>{{ calculatedAnalytic.result }}</td>
    </tr>
  </tbody>
</table>
